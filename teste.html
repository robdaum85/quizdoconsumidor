<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>Quiz do Consumidor ‚Äî mobile test</title>
<meta name="theme-color" content="#24A653" />

<style>
/* =========================================================
   MOBILE TEST (mobile.html)
   - foco em celular (375‚Äì480px largura)
   - uma coluna de respostas
   - scroll global (sem ‚Äúscroll dentro do card‚Äù)
   ========================================================= */
:root{
  --brand:#24A653; --brand-hi:#8ff5c1;
  --accent:#FFDA3A; --danger:#E5242A;
  --bg:#0b0b16; --panel:#0f1330cc; --ink:#ecf2ff; --muted:#a9b7d7;
  --ans:#19214a; --ans-ok:#0f6a2f; --ans-bad:#7a1f2e;
  --ring:#ffffff24; --radius:16px;
  --gap: 12px;
  --vh: 1vh; /* ser√° atualizado via JS para evitar bugs de 100vh no mobile */
  color-scheme: dark;
}
*{box-sizing:border-box;-webkit-tap-highlight-color:transparent}
html,body{
  margin:0; background:var(--bg); color:var(--ink);
  font-family:system-ui, Segoe UI, Roboto, Arial, sans-serif;
  overflow-x:hidden; overflow-y:auto; /* scroll global habilitado */
}

/* Palco: altura m√≠nima igual ao viewport vis√≠vel, sem prender em 100vh */
.stage{
  min-height: calc(var(--vh) * 100);
  width:100%;
  display:flex; flex-direction:column; gap:0;
  background:
    radial-gradient(900px 700px at 80% -10%, #17224b 0%, transparent 60%),
    radial-gradient(600px 600px at 15% 10%, #111a3d 0%, transparent 60%),
    var(--bg);
}

/* ========= HEADER ULTRA-COMPACTO ========= */
.header{
  height:48px; display:flex; align-items:center; justify-content:space-between;
  padding: 0 12px;
  background: linear-gradient(180deg,#0e1436aa,#0b102c99);
  border-bottom:1px solid var(--ring); backdrop-filter: blur(6px);
  position:sticky; top:0; z-index:10; /* sempre vis√≠vel ao rolar */
}
.h-left{display:flex;align-items:center;gap:10px}
.logo{width:26px;height:26px;border-radius:8px;background:linear-gradient(135deg,var(--brand),var(--brand-hi));display:grid;place-items:center;color:#021;font-weight:900;font-size:13px}
.h-title{font-weight:800;letter-spacing:.2px;font-size:12px;color:var(--muted);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:52vw}
.h-right{display:flex;align-items:center;gap:8px}
.minibtn{height:32px;padding:0 10px;font-weight:800;font-size:12px;border:3px solid #000;border-radius:10px;box-shadow:0 4px 0 #000;cursor:pointer;background:#1a204a;color:#fff}
.minibtn.danger{background:linear-gradient(180deg,var(--danger),#8b1017)}
.select{appearance:none;background:#0d1130;color:#fff;border:3px solid #000;border-radius:10px;padding:0 8px;height:32px;font-weight:800}

/* ========= CONTE√öDO ========= */
.screen{display:grid;place-items:start;padding:12px}
.kiosk{
  width: min(720px, 100%);
  margin: 10px auto 16px;
  background: linear-gradient(180deg, var(--panel), #0f1338e0);
  border:4px solid #000;border-radius:var(--radius);
  box-shadow:0 14px 40px rgba(0,0,0,.45);
  position:relative; overflow:visible; /* sem scroll interno */
}
.bggrid{position:absolute; inset:0; opacity:.22; pointer-events:none;
  background:
   linear-gradient(transparent 95%, rgba(255,255,255,.06) 95%) 0 0/100% 28px,
   linear-gradient(90deg, transparent 95%, rgba(255,255,255,.06) 95%) 0 0/28px 100%;
  border-radius:inherit;
}

/* HUD compacto */
.hud{
  display:flex; justify-content:center; align-items:center; gap:12px;
  padding: 12px 10px 2px;
}
.timerWrap{position:relative;width:84px;height:84px;display:grid;place-items:center}
.timerSvg{transform:rotate(-90deg)} .timerRingBg{stroke:#000;opacity:.5}
.timerRing{stroke:var(--accent);transition:stroke-dashoffset .25s linear}
.timerNum{position:absolute;font-weight:900;font-size:20px}
.badge{display:inline-flex;align-items:center;gap:8px;padding:8px 10px;background:#0d1130;border:3px solid #000;border-radius:12px;box-shadow:inset 0 -4px 0 rgba(0,0,0,.45),0 4px 0 #000;font-weight:900;font-size:14px}

/* Corpo */
.body{display:grid; gap:12px; padding: 12px}
.title{font-weight:900; font-size: clamp(20px, 3.4vh, 28px); color:var(--accent); text-align:center; text-shadow: 0 3px 0 #000, 0 0 12px rgba(255,218,58,.3)}
.q{font-weight:800; font-size: clamp(18px, 2.6vh, 22px); text-align:center; text-shadow:0 2px 0 #000}

.answers{display:grid; grid-template-columns:1fr; gap:12px; align-content:start}
.answer{
  display:flex; align-items:center; gap:12px; min-height:64px;
  padding: 14px 14px; text-align:left; background:var(--ans); color:#fff;
  border:4px solid #000; border-radius:14px; box-shadow:0 8px 0 #000;
  font-weight:800; font-size: 16px; cursor:pointer; user-select:none; touch-action: manipulation;
}
.answer:active{transform:translateY(3px)}
.key{display:grid;place-items:center;width:36px;height:36px;min-width:36px;border:3px solid #333;border-radius:10px;background:#000;color:var(--accent);font-weight:900}
.answer.correct{background:var(--ans-ok)}
.answer.wrong{background:var(--ans-bad)}
.answer.disabled{opacity:.6; pointer-events:none}

/* Progresso */
.progress{width:88%; height:10px; margin:6px auto 2px; background:#000; border:4px solid #000; border-radius:9px; overflow:hidden}
.progress>i{display:block;height:100%;background:linear-gradient(90deg,var(--brand),var(--brand-hi));width:0%}

/* Rodap√© interno */
.footerBox{display:flex;justify-content:center;align-items:center;gap:10px;padding:12px}
.prize{padding:8px 10px;border:3px dashed #000;border-radius:12px;background: linear-gradient(180deg, #16205b, #0e1541); font-weight:900; font-size:14px}

/* Bot√µes */
.btn{display:inline-flex;align-items:center;justify-content:center;gap:10px;
  background:linear-gradient(180deg,var(--brand),color-mix(in oklab,var(--brand) 70%, #000));
  color:#021;padding: 14px 18px;border:4px solid #000;border-radius:14px;
  font-weight:900;font-size: 16px; box-shadow:0 8px 0 #000; cursor:pointer; min-height:52px;
}
.btn.alt{background:linear-gradient(180deg,var(--accent),#b48a1d); color:#311}
.btn.danger{background:linear-gradient(180deg,var(--danger),#8a1017); color:#fff}
.btn:active{transform:translateY(3px); box-shadow:0 5px 0 #000}

/* Estados */
section[hidden]{display:none}
.center{text-align:center}
.pixel{letter-spacing:.4px}

/* Feedback maior e com anima√ß√£o reduzida se preferido */
.toast{position:fixed;left:50%;bottom:calc(env(safe-area-inset-bottom, 0px) + 90px);transform:translateX(-50%);
  background:#000;border:4px solid #fff;border-radius:12px;padding:12px 14px;font-weight:900;z-index:50;
  font-size: 16px; text-align:center; animation: pop .18s ease both, blink 1.1s steps(2,end) 3 .2s;
}
@keyframes pop{from{transform:translateX(-50%) scale(.9)}to{transform:translateX(-50%) scale(1)}}
@keyframes blink{50%{opacity:.35}}
@media (prefers-reduced-motion: reduce){
  .toast{animation:none}
}

/* Splash */
.splash{position:fixed;inset:0;background:#000;display:grid;place-items:center;color:var(--accent);font-weight:900;font-size:18px;animation:splash .7s ease both;z-index:80}
@keyframes splash{0%{opacity:0}10%{opacity:1}100%{opacity:0}}

/* Inputs */
.input{
  width: 100%;
  padding: 14px 16px; border:4px solid #000; border-radius:12px;
  background:#0d1130; color:#fff; font-weight:800; font-size:16px;
  box-shadow:inset 0 -4px 0 rgba(0,0,0,.45),0 4px 0 #000;
}
.input::placeholder{color:#8892b0}
.formRow{display:grid;grid-template-columns:1fr auto;gap:10px}

/* Footer global m√≠nimo */
.footer{display:flex;justify-content:center;align-items:center;height:40px;border-top:1px solid var(--ring);color:var(--muted);font-size:12px}

/* Evita qualquer barra horizontal fantasiosa */
*{max-width:100vw}
</style>
</head>
<body>

<div class="stage">
  <!-- HEADER -->
  <header class="header" role="banner">
    <div class="h-left">
      <div class="logo">QC</div>
      <div class="h-title">SEDCON / Procon-RJ ‚Äî Mobile Test</div>
    </div>
    <div class="h-right">
      <select id="themeSel" class="select" aria-label="Tema">
        <option value="default">Padr√£o</option>
        <option value="contrast">Alto contraste</option>
        <option value="cvd">Dalt√¥nico-safe</option>
      </select>
      <button id="btnMute" class="minibtn" aria-pressed="true" title="Som">üîá</button>
      <button id="btnReset" class="minibtn danger" title="Reset">Reset</button>
    </div>
  </header>

  <!-- CONTE√öDO -->
  <main class="screen" role="main">
    <div class="kiosk" id="kiosk">
      <div class="bggrid" aria-hidden="true"></div>

      <!-- HUD -->
      <div class="hud">
        <div class="badge">Score: <span id="score" class="pixel">0000</span></div>
        <div class="timerWrap" aria-live="polite" aria-atomic="true">
          <svg class="timerSvg" viewBox="0 0 120 120" width="84" height="84" role="img" aria-label="Tempo">
            <circle class="timerRingBg" cx="60" cy="60" r="52" fill="none" stroke-width="12"></circle>
            <circle id="timerRing" class="timerRing" cx="60" cy="60" r="52" fill="none" stroke-width="12"
                    stroke-linecap="round" stroke-dasharray="326.7256" stroke-dashoffset="0"></circle>
          </svg>
          <div id="timerNum" class="timerNum pixel" style="font-size:20px">60</div>
        </div>
        <div class="badge pixel" id="lives">‚ù§‚ù§‚ù§</div>
      </div>

      <!-- Corpo -->
      <div class="body">
        <div class="title pixel" id="gameTitle">Quiz do Consumidor</div>

        <!-- START -->
        <section id="start" class="center">
          <div style="margin:6px 0 10px;color:var(--muted);font-size:14px">Digite seu nome e toque em Iniciar</div>
          <div class="formRow">
            <input id="playerName" class="input" aria-label="Nome" placeholder="Seu nome">
            <button id="btnStart" class="btn pixel" type="button" disabled>INICIAR</button>
          </div>
        </section>

        <!-- QUIZ -->
        <section id="quiz" hidden>
          <div class="q" id="qtext">Pergunta‚Ä¶</div>
          <div class="progress" aria-hidden="true"><i id="bar"></i></div>
          <div class="answers" id="answers" role="list"></div>
        </section>

        <!-- RESULTADO -->
        <section id="result" hidden class="center">
          <div id="resultTitle" class="title pixel">RESULTADO</div>
          <div style="display:flex;gap:10px;justify-content:center;margin-top:6px;flex-wrap:wrap">
            <div class="badge" style="background:#001a0d">Acertos <span id="hits" class="pixel" style="margin-left:6px">0/0</span></div>
            <div class="badge" style="background:#1b0033">Score <span id="finalScore" class="pixel" style="margin-left:6px">0000</span></div>
          </div>
          <div id="prizeBox" class="prize" style="margin-top:10px">Brinde: ‚Äî</div>

          <div style="display:flex;gap:10px;justify-content:center;margin-top:12px;flex-wrap:wrap">
            <button id="btnAgain" class="btn alt pixel">JOGAR NOVAMENTE</button>
            <button id="btnClearBoard" class="btn danger">Limpar Ranking</button>
          </div>

          <div class="prize" style="margin:12px auto 0; width:min(640px,100%); text-align:left">
            <div style="font-weight:900;margin-bottom:6px">Ranking ‚Äî Top 5 <span class="badge" style="margin-left:8px">local</span></div>
            <table id="boardTable" style="width:100%;border-collapse:collapse;font-size:14px"></table>
          </div>
        </section>
      </div>

      <!-- Rodap√© interno -->
      <div class="footerBox">
        <div class="prize" id="footPrize">Brinde: ‚Äî</div>
      </div>
    </div>
  </main>

  <footer class="footer">v3.0 ‚Äî mobile test</footer>
</div>

<script>
/* ================= MOBILE JS (sem service worker/analytics) ================= */
const $=s=>document.querySelector(s), $$=s=>Array.from(document.querySelectorAll(s));
const wait=ms=>new Promise(r=>setTimeout(r,ms));
const pad4=n=>String(n).padStart(4,'0');
const show=id=>['start','quiz','result'].forEach(k=>document.getElementById(k).hidden=(k!==id));

/* Safe viewport height (corrige barra de URL no mobile) */
function setVH(){ document.documentElement.style.setProperty('--vh', (window.innerHeight*0.01)+'px'); }
setVH(); addEventListener('resize', setVH, {passive:true});
addEventListener('orientationchange', ()=>setTimeout(setVH, 250), {passive:true});
document.addEventListener('visibilitychange', ()=>setTimeout(setVH, 250));

const CONFIG={N:5,TIME:60,LIVES:3,BOARD:5,KEYS:{BOARD:'procon_board',THEME:'procon_theme'}};
const CIRC=326.7256;

let audioCtx=null; const S={name:'Jogador',pool:[],idx:0,ok:0,lives:CONFIG.LIVES,score:0,time:CONFIG.TIME,lock:false,tick:null,muted:true};
function ensureAudio(){ if(!audioCtx){ try{ audioCtx=new (window.AudioContext||window.webkitAudioContext)(); }catch{} } }
function blip(type,f,d,v){ if(!audioCtx||S.muted) return; const o=audioCtx.createOscillator(), g=audioCtx.createGain(); o.type=type;o.frequency.value=f;g.gain.value=v;o.connect(g);g.connect(audioCtx.destination);o.start(); setTimeout(()=>{try{o.stop()}catch{}}, Math.max(60,d*1000)); }
const sfx={ start(){[523,659,784].forEach((f,i)=>setTimeout(()=>blip('square',f,.09,.25),i*110));},
            ok(){blip('square',880,.09,.28)}, bad(){blip('sawtooth',160,.14,.28)},
            win(){[659,784,988,1174].forEach((f,i)=>setTimeout(()=>blip('square',f,.09,.3),i*120));},
            over(){[392,330,262].forEach((f,i)=>setTimeout(()=>blip('triangle',f,.12,.3),i*150));} };

const BANK=[
  { q:'Comprou pela internet e se arrependeu. Pode devolver?', a:['N√£o','Sim, em at√© 7 dias','S√≥ se tiver defeito','Apenas com aval do vendedor'], c:1, tip:'Direito de arrependimento (7 dias).' },
  { q:'Cobran√ßa indevida paga: seu direito √©‚Ä¶', a:['Nada','Devolver o valor','Devolu√ß√£o em dobro','Voucher'], c:2, tip:'Repeti√ß√£o do ind√©bito em dobro.' },
  { q:'Produto entregue diferente do contratado:', a:['Aceitar a varia√ß√£o','Exigir o contratado ou cancelar','Pedir 10% de desconto','Aguardar 30 dias'], c:1, tip:'Entrega deve corresponder.' },
  { q:'Recebeu produto n√£o solicitado com boleto:', a:['N√£o pagar (√© amostra gr√°tis)','Pagar','S√≥ se abrir a caixa','Guardar e pagar depois'], c:0, tip:'Envio sem pedido √© proibido.' },
  { q:'Pre√ßo menor na g√¥ndola vs caixa:', a:['Vale o do caixa','Vale o menor pre√ßo','Divide ao meio','Nenhum'], c:1, tip:'Prevalece o menor.' },
  { q:'Quem √© consumidor pelo CDC?', a:['Apenas pessoa f√≠sica','Pessoa f√≠sica ou jur√≠dica','Somente quem compra on-line','Apenas empresas'], c:1, tip:'Art. 2¬∫: destinat√°rio final.' },
  { q:'Garantia legal para dur√°veis √© de‚Ä¶', a:['30 dias','90 dias','6 meses','1 ano'], c:1, tip:'CDC art. 26 ‚Äî 90 dias.' }
];
function shuffle(a){ for(let i=a.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [a[i],a[j]]=[a[j],a[i]];} return a; }
function pick(n){ const arr=shuffle(BANK.slice()); return arr.slice(0,n).map(it=>{ const map=it.a.map((t,i)=>({t,i})); shuffle(map); return {q:it.q, a:map.map(m=>m.t), c:map.findIndex(m=>m.i===it.c), tip:it.tip}; }); }

function updateTimer(reset){
  const r=$('#timerRing'), n=$('#timerNum');
  if(reset){ r.style.strokeDashoffset='0'; n.textContent=S.time; return; }
  const p=Math.max(0,S.time/CONFIG.TIME);
  r.style.strokeDashoffset=String((1-p)*CIRC);
  r.style.stroke = (S.time<=10)?'#E5242A':'var(--accent)';
  n.textContent=S.time;
}

async function splash(text='START'){ const d=document.createElement('div'); d.className='splash'; d.textContent=text; document.body.appendChild(d); await wait(700); d.remove(); }
function toast(msg){ const t=document.createElement('div'); t.className='toast'; t.textContent=msg; document.body.appendChild(t); setTimeout(()=>t.remove(),1400); }

async function reset(){
  S.pool=pick(CONFIG.N); S.idx=0; S.ok=0; S.lives=CONFIG.LIVES; S.score=0; S.time=CONFIG.TIME; S.lock=false;
  $('#score').textContent='0000'; $('#lives').textContent='‚ù§'.repeat(S.lives); $('#bar').style.width='0%'; updateTimer(true);
}
async function start(){
  await splash('START!'); ensureAudio(); try{audioCtx?.resume?.()}catch{};
  sfx.start(); await reset(); show('quiz'); nextQ();
  clearInterval(S.tick);
  S.tick=setInterval(()=>{ S.time--; updateTimer(); if(S.time<=0){ clearInterval(S.tick); over(); } },1000);
}

function nextQ(){
  if(S.idx>=S.pool.length){ return win(); }
  const it=S.pool[S.idx];
  $('#qtext').textContent=`Q${S.idx+1}/${S.pool.length}: ${it.q}`;
  const wrap=$('#answers'); wrap.innerHTML='';
  it.a.forEach((txt,i)=>{ const b=document.createElement('button'); b.className='answer'; b.innerHTML=`<span class="key">${String.fromCharCode(65+i)}</span><span>${txt}</span>`; b.addEventListener('click',()=>choose(i,b,it),{passive:true}); wrap.appendChild(b); });
  $('#bar').style.width=`${(S.idx/S.pool.length)*100}%`;
  // rola a pergunta para o topo vis√≠vel (√∫til no mobile ap√≥s teclado)
  $('#qtext').scrollIntoView({behavior:'smooth', block:'start'});
}

async function choose(i,btn,it){
  if(S.lock) return; S.lock=true;
  const ok=i===it.c;
  if(ok){ btn.classList.add('correct'); S.ok++; S.score+=250; $('#score').textContent=pad4(S.score); sfx.ok(); toast(it.tip); }
  else{ btn.classList.add('wrong'); S.lives--; $('#lives').textContent='‚ù§'.repeat(Math.max(0,S.lives)); sfx.bad(); if(S.lives<=0){ await wait(700); return over(); } }
  $$('.answer').forEach(b=>{ if(b!==btn) b.classList.add('disabled'); });
  await wait(900); S.idx++; S.lock=false; nextQ();
}

function prizeFor(ok,total){ if(ok===total) return 'Melhor Pr√™mio'; if(ok>=Math.ceil(total/2)) return 'Pr√™mio M√©dio'; if(ok===0) return 'CDC comentado'; return '‚Äî'; }
function uuid(){ return Math.random().toString(36).slice(2)+Date.now().toString(36); }
function finish(title){
  const total=S.pool.length;
  const entry={ id:uuid(), name:S.name||'Jogador', correct:S.ok, total, score:S.score, time:Math.max(0,S.time), prize:prizeFor(S.ok,total), ts:Date.now() };
  const board=addBoard(entry);
  $('#resultTitle').textContent=title; $('#hits').textContent=`${S.ok}/${total}`; $('#finalScore').textContent=pad4(S.score);
  $('#prizeBox').textContent=`Brinde: ${entry.prize}`; $('#footPrize').textContent=`Brinde: ${entry.prize}`; renderBoard('#boardTable',board);
  show('result');
}
function win(){ clearInterval(S.tick); sfx.win(); splash('WIN!').then(()=>finish('PARAB√âNS! üéâ')); }
function over(){ clearInterval(S.tick); sfx.over(); splash('GAME OVER').then(()=>finish('FIM DE JOGO')); }

/* Leaderboard local */
function loadBoard(){ try{return JSON.parse(localStorage.getItem(CONFIG.KEYS.BOARD)||'[]')}catch{return[]} }
function saveBoard(list){ localStorage.setItem(CONFIG.KEYS.BOARD, JSON.stringify(list)); }
function addBoard(entry){ const list=loadBoard(); list.push(entry); list.sort((a,b)=>(b.score-a.score)||(b.time-a.time)); const top=list.slice(0,CONFIG.BOARD); saveBoard(top); return top; }
function renderBoard(sel,list=loadBoard()){
  const t=$(sel); if(!t) return;
  if(!list.length){ t.innerHTML='<tr><td style="padding:6px 0">Sem resultados ainda.</td></tr>'; return; }
  let rows='<tr><th style="text-align:left;padding:6px 4px">#</th><th style="text-align:left">Nome</th><th>Acertos</th><th>Score</th><th>Tempo</th><th>Quando</th></tr>';
  rows+=list.map((r,i)=>`<tr>
    <td style="padding:6px 4px">${i+1}</td>
    <td>${(r.name||'').replace(/[&<>"']/g,'')}</td>
    <td style="text-align:center">${r.correct}/${r.total}</td>
    <td style="text-align:center">${pad4(r.score)}</td>
    <td style="text-align:center">${r.time}s</td>
    <td>${new Date(r.ts).toLocaleString()}</td>
  </tr>`).join('');
  t.innerHTML=rows;
}

/* Controles */
const nameInput=$('#playerName');
nameInput.addEventListener('input',()=>{ const v=(nameInput.value||'').trim(); $('#btnStart').disabled=v.length===0; S.name=v||'Jogador'; },{passive:true});
$('#btnStart').addEventListener('click', e=>{e.preventDefault(); start();},{passive:true});
$('#btnAgain').addEventListener('click', e=>{ e.preventDefault(); show('start'); nameInput.value=''; nameInput.placeholder='Seu nome'; $('#btnStart').disabled=true; S.name='Jogador'; },{passive:true});
$('#btnReset').addEventListener('click', ()=>{ clearInterval(S.tick); show('start'); nameInput.value=''; $('#btnStart').disabled=true; S.name='Jogador'; $('#score').textContent='0000'; $('#lives').textContent='‚ù§‚ù§‚ù§'; $('#footPrize').textContent='Brinde: ‚Äî'; renderBoard('#boardTable'); },{passive:true});
$('#btnClearBoard').addEventListener('click', ()=>{ if(confirm('Limpar ranking local?')){ localStorage.setItem(CONFIG.KEYS.BOARD,'[]'); renderBoard('#boardTable'); }});
$('#btnMute').addEventListener('click',()=>{ S.muted=!S.muted; $('#btnMute').textContent=S.muted?'üîá':'üîä'; $('#btnMute').setAttribute('aria-pressed', String(!S.muted)); },{passive:true});

/* Temas (apenas ajusta vari√°veis do :root) */
const themeSel=$('#themeSel');
function applyTheme(val){
  if(val==='contrast'){
    const r=document.documentElement.style;
    r.setProperty('--bg','#000'); r.setProperty('--panel','#000'); r.setProperty('--ink','#fff'); r.setProperty('--muted','#ddd');
    r.setProperty('--brand','#00ff66'); r.setProperty('--accent','#ffff00'); r.setProperty('--ans','#111');
    r.setProperty('--ans-ok','#005a22'); r.setProperty('--ans-bad','#4d0010');
  }else if(val==='cvd'){
    const r=document.documentElement.style;
    r.setProperty('--bg','#09111e'); r.setProperty('--panel','#0d1430cc'); r.setProperty('--ink','#f3f6ff'); r.setProperty('--muted','#c7cfe6');
    r.setProperty('--brand','#2aa6f2'); r.setProperty('--accent','#ffd166'); r.setProperty('--ans','#1a234d');
    r.setProperty('--ans-ok','#1c4f7a'); r.setProperty('--ans-bad','#6b2f4a');
  }else{
    document.documentElement.removeAttribute('style'); // volta ao padr√£o
  }
  localStorage.setItem(CONFIG.KEYS.THEME,val);
}
themeSel.addEventListener('change', e=>applyTheme(e.target.value),{passive:true});
(function bootTheme(){ const saved=localStorage.getItem(CONFIG.KEYS.THEME)||'default'; themeSel.value=saved; applyTheme(saved); })();

/* Boot */
document.addEventListener('DOMContentLoaded',()=>{
  renderBoard('#boardTable');
  updateTimer(true);
});
</script>
</body>
</html>
